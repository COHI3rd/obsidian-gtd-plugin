# デイリーノート反映ボタンの使い方

## 前提条件

デイリーノート反映ボタンを使用するには、以下の条件を満たす必要があります：

### 1. 完了したTodayタスクが存在する

- タスクのステータスが`today`である
- タスクの日付が今日である（`date: 2025-10-31`など）
- タスクが完了している（`completed: true`）

**例:**
```yaml
---
title: メール返信
status: today
date: 2025-10-31
completed: true
priority: medium
---
```

### 2. デイリーノートの設定

1. Obsidianの設定を開く
2. `GTD Task Manager` → デイリーノート連携
3. 以下を設定：
   - **デイリーノートフォルダ**: デイリーノートを保存するフォルダ（例: `DailyNotes`）
   - **デイリーノート日付フォーマット**: ファイル名の日付形式（デフォルト: `YYYY-MM-DD`）
     - `YYYY-MM-DD`、`yyyy-MM-dd`、`YYYY年MM月DD日`など、どの形式でも対応します

## 使い方

1. **タスクを完了する**
   - Todayエリアにあるタスクのチェックボックスをオンにする
   - タスクは自動的に`GTD/tasks/完了/YYYY-MM-DD/`フォルダに移動

2. **デイリーノート反映ボタンを押す**
   - GTDビューのヘッダーにある「📝 デイリーノートに反映」ボタンをクリック

3. **結果を確認**
   - 今日の日付のデイリーノートファイルが開かれる（なければ自動作成）
   - 以下のような内容が追加される：

```markdown
## 📋 今日完了したタスク

- [x] メール返信 (優先度: 高)
- [x] 資料作成 - [[プロジェクトA]]
- [x] ミーティング準備
```

## トラブルシューティング

### ボタンを押しても何も起こらない

1. **開発者コンソールでログを確認**
   - Ctrl+Shift+I を押す
   - 「Console」タブを選択
   - ボタンを押してログを確認

   以下のログが表示されるはずです：
   ```
   handleInsertToDailyNote called
   All tasks: 10
   Task: メール返信, isToday: true, completed: true
   Task: 資料作成, isToday: true, completed: false
   ...
   Today completed tasks: 1
   ```

2. **今日完了したタスクがあるか確認**
   - `Today completed tasks: 0` と表示される場合、該当するタスクがありません
   - 以下を確認：
     - タスクの日付が今日になっているか
     - タスクのステータスが`today`になっているか
     - タスクが完了しているか（`completed: true`）

3. **デイリーノートフォルダの設定を確認**
   - 設定 → GTD Task Manager → デイリーノート連携
   - フォルダパスが正しいか確認
   - フォルダが存在しない場合は自動作成されます

### 「今日完了したタスクはありません」と表示される

これは正常な動作です。以下を確認してください：

1. **Todayタスクを完了したか**
   - タスクがTodayエリアにあり、チェックボックスがオンになっているか

2. **タスクの日付が今日か**
   - タスクファイルを開いて、`date: YYYY-MM-DD`が今日の日付になっているか
   - 過去の日付のタスクは対象外です

3. **タスクが`完了`フォルダに移動したか**
   - `GTD/tasks/完了/YYYY-MM-DD/`フォルダ内にタスクがあるか確認

## デイリーノートの保存場所

デフォルト設定の場合：
```
YourVault/
├── YYYY-MM-DD.md  (例: 2025-10-31.md)
```

フォルダを設定している場合（例: `DailyNotes`）：
```
YourVault/
├── DailyNotes/
│   ├── 2025-10-31.md
│   ├── 2025-11-01.md
│   └── ...
```

## よくある質問

### Q: 複数回ボタンを押したらどうなる？

A: セクション内容が上書きされます。最新の完了タスク一覧に更新されます。

### Q: 手動でタスクを編集したい

A: デイリーノートファイルを直接編集してください。プラグインが生成した内容は自由に変更できます。

### Q: Dataview方式との違いは？

- **ボタン方式**: 手動でボタンを押して挿入。デイリーノート内に直接Markdownとして記述される
- **Dataview方式**: 自動でクエリ結果を表示。リアルタイムで更新される

両方を併用することも可能です。

## 参考: タスクの状態遷移

```
1. タスク作成
   status: inbox
   date: null
   completed: false

2. Todayに移動（ドラッグ&ドロップ）
   status: today
   date: 2025-10-31 (自動設定)
   completed: false

3. チェックボックスをオン
   status: today
   date: 2025-10-31
   completed: true
   → ファイルが GTD/tasks/完了/2025-10-31/ に移動

4. デイリーノート反映ボタン
   → 今日のデイリーノートに完了タスクを挿入
```
